if("undefined"!=typeof window.Craft&&window.Craft.username){function a(){if(window.location.href===window.Craft.baseCpUrl+"/settings/fields"){var a=document.querySelectorAll("#fields tbody tr");if(a.length){var b=[];a.forEach(function(a){var c=a.querySelector("code").textContent,d=a.getAttribute("data-id");b.push([c,d])}),localStorage.setItem("fieldData",JSON.stringify(b))}}}function b(){fields.forEach(function(a){var a=a.childNodes;a.forEach(function(a){if("SPAN"===a.tagName){var b=a.getAttribute("title");a.parentNode.insertAdjacentHTML("beforeEnd",d(b))}})}),document.querySelectorAll(".fld-tab").forEach(function(a){a.style.cssText="height: auto;"})}function c(){fields=document.querySelectorAll(".fld-field"),fieldHeadings=document.querySelectorAll("#fields .field:not(#title-field) .heading"),fieldHeadings.forEach(function(a){var b=a.childNodes;b.forEach(function(b){if(!a.querySelector(".fieldset")&&"LABEL"==b.tagName){var c=b.getAttribute("for").split("-").pop();b.parentNode.insertAdjacentHTML("beforeEnd",d(c))}})})}function d(a){return"<fieldset class=\"fieldset text\"><legend><span class=\"legendLabel\">Handle</span></legend><input class=\"fieldHandle\" value=\""+a+"\" title=\"Click to copy\" readonly=\"readonly\"></fieldset>"}console.log("Craft Field Handles initialized");var fields=document.querySelectorAll(".fld-field"),fieldHeadings=document.querySelectorAll("#fields .field:not(#title-field) .heading");(0<fields.length||0<fieldHeadings.length)&&(function(){document.querySelector(".btn.submit").insertAdjacentHTML("beforeBegin","<div class=\"handleButton btn submit\">devMode</div>");var a=document.querySelector(".handleButton");window.localStorage.getItem("cpShowHandles")&&(document.body.classList.add("showHandles"),a.classList.add("is-active")),a.addEventListener("click",function(){document.body.classList.toggle("showHandles"),window.localStorage.getItem("cpShowHandles")?(localStorage.removeItem("cpShowHandles"),a.classList.remove("is-active")):(localStorage.setItem("cpShowHandles",!0),a.classList.add("is-active"))})}(),c(),b(),function(){var a=document.querySelectorAll(".fieldHandle");a.forEach(function(a){document.addEventListener("click",function(b){if(b.target&&b.target.className===a.className){var c=b.target.parentNode.querySelector(".legendLabel"),d=c.textContent;b.target.select(),document.execCommand("copy"),c.textContent="Copied",setTimeout(function(){c.textContent="Handle"},300)}})})}(),function(){var a=document.querySelectorAll(".field .btn");a.forEach(function(a){a.addEventListener("click",function(){setTimeout(function(){c()},1)})})}(),window.onload=function(){var a=localStorage.getItem("fieldData");if(a){var b=JSON.parse(a),c=document.querySelectorAll(".fieldHandle");b.forEach(function(a){c.forEach(function(b){if(a[0]==b.value){var c="<a class=\"handleIcon\" data-icon=\"settings\" href=\""+window.Craft.baseCpUrl+"/settings/fields/edit/"+a[1]+"\" target=\"_blank\"></a>";b.parentNode.querySelector("legend").insertAdjacentHTML("beforeEnd",c)}})})}}()),a()}
